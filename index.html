<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Interview Assistant - Fixed Styling</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .intro-section {
            text-align: left;
            color: #333;
            margin-bottom: 40px;
        }
        
        .intro-section h1 {
            color: #34495e;
            margin-bottom: 25px;
            font-size: 32px;
            text-align: center;
            font-weight: bold;
        }
        
        .intro-section p {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .tips {
            font-size: 16px;
            color: #666;
            margin-bottom: 40px;
            padding: 15px;
            background-color: #e8f4f8;
            border-radius: 8px;
            border-left: 4px solid #34495e;
        }
        
        .widget-area {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            margin-top: 40px;
            margin-bottom: 60px;
            position: relative;
        }
        
        /* Ensure adequate spacing on mobile */
        @media (max-height: 600px) {
            .widget-area {
                margin-top: 20px;
                margin-bottom: 40px;
                min-height: 150px;
            }
        }
        
        /* Status messages */
        .status-message {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 24px;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 25px;
            font-size: 14px;
            z-index: 1002;
            display: none;
            text-align: center;
        }

        /* Optional: Additional styling for VAPI button states */
        .vapi-btn {
            transition: all 0.3s ease !important;
            box-shadow: 0 4px 20px rgba(52, 73, 94, 0.3) !important;
            /* Override VAPI positioning to center in widget-area */
            position: absolute !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            right: auto !important;
            bottom: auto !important;
            /* Ensure perfect circle on all screens */
            border-radius: 50% !important;
            aspect-ratio: 1 / 1 !important;
            min-width: 0 !important;
            min-height: 0 !important;
            max-width: none !important;
            max-height: none !important;
            flex-shrink: 0 !important;
        }

        .vapi-btn-is-idle {
            animation: pulse 2s infinite ease-in-out !important;
        }

        .vapi-btn-is-active {
            animation: active-pulse 1.5s infinite ease-in-out !important;
        }

        /* Beautiful pulsing animation on the real widget */
        @keyframes pulse {
            0% {
                background-color: #34495e !important;
                box-shadow: 0 0 10px rgba(52, 73, 94, 0.2) !important;
                opacity: 0.8 !important;
                transform: translate(-50%, -50%) scale(1) !important;
            }
            50% {
                background-color: #5dade2 !important;
                box-shadow: 0 0 40px rgba(93, 173, 226, 0.9) !important,
                           0 0 60px rgba(93, 173, 226, 0.6) !important,
                           0 0 80px rgba(93, 173, 226, 0.3) !important;
                opacity: 1 !important;
                transform: translate(-50%, -50%) scale(1.05) !important;
            }
            100% {
                background-color: #34495e !important;
                box-shadow: 0 0 10px rgba(52, 73, 94, 0.2) !important;
                opacity: 0.8 !important;
                transform: translate(-50%, -50%) scale(1) !important;
            }
        }

        @keyframes active-pulse {
            0%, 100% { 
                box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4) !important;
            }
            50% { 
                box-shadow: 0 12px 35px rgba(231, 76, 60, 0.7) !important;
            }
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .intro-section h1 {
                font-size: 28px;
            }
            
            .intro-section p {
                font-size: 16px;
            }

            .widget-area {
                margin-top: 30px;
                margin-bottom: 40px;
                min-height: 120px;
            }

            /* Smaller button on mobile - keep it circular */
            .vapi-btn {
                width: 120px !important;
                height: 120px !important;
                border-radius: 50% !important;
            }
        }

        @media (max-width: 480px) {
            .intro-section h1 {
                font-size: 24px;
            }
            
            .tips {
                padding: 12px;
                font-size: 14px;
            }

            .widget-area {
                margin-top: 20px;
                margin-bottom: 30px;
                min-height: 100px;
            }

            /* Even smaller button on very small screens - keep it circular */
            .vapi-btn {
                width: 100px !important;
                height: 100px !important;
                border-radius: 50% !important;
            }
        }

        /* Handle very short screens (landscape mobile) */
        @media (max-height: 500px) {
            .widget-area {
                margin-top: 15px;
                margin-bottom: 20px;
                min-height: 80px;
            }

            .intro-section {
                margin-bottom: 20px;
            }

            .tips {
                margin-bottom: 20px;
                padding: 10px;
            }

            /* Adjust button size for landscape mode */
            .vapi-btn {
                width: 80px !important;
                height: 80px !important;
                border-radius: 50% !important;
            }
        }

        /* Extra small screens */
        @media (max-width: 320px) {
            .vapi-btn {
                width: 90px !important;
                height: 90px !important;
                border-radius: 50% !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="intro-section">
            <h1>Ready for Your AI Interview?</h1>
            <p>
                Before you begin, please find a <strong>quiet, private location</strong> with good internet connection. Make sure you're in a well-lit space where you can speak clearly without interruptions.
            </p>
            <p>
                The AI assistant will guide you through the interview process. Speak naturally and take your time to think before answering. If you need clarification on any question, don't hesitate to ask.
            </p>
            <div class="tips">
                <strong>üìù Tips for Success:</strong><br>
                ‚Ä¢ Use headphones or earbuds for better audio quality<br>
                ‚Ä¢ Close other applications to ensure stable connection<br>
                ‚Ä¢ Have your resume or relevant documents nearby if needed<br>
                ‚Ä¢ Speak clearly and at a normal pace
            </div>
        </div>
        
        <div class="widget-area">
            <!-- Widget will appear here -->
        </div>
    </div>
    
    <div class="status-message" id="statusMessage"></div>
    
    <script>
        var vapiInstance = null;
        const assistant = "35c7f5f0-a44c-4172-85da-1c05cc5e55e7"; // Your assistant ID
        const apiKey = "1f80cbcd-97fc-45ad-ba54-5eff014c5f4e"; // Your public key
        
        // THIS IS THE KEY - Use buttonConfig for proper styling
        const buttonConfig = {
            position: "bottom-right", // Will be repositioned with CSS
            offset: "20px",
            width: "144px",
            height: "144px",
            
            // Idle state (when not connected)
            idle: {
                color: "#34495e", // Your desired color
                type: "round", // round button
                title: "Click to talk",
                subtitle: "Start your interview",
                icon: "https://unpkg.com/lucide-static@0.321.0/icons/mic.svg"
            },
            
            // Loading state (connecting)
            loading: {
                color: "#f39c12", // Orange for connecting
                type: "round",
                title: "Connecting...",
                subtitle: "Please wait",
                icon: "https://unpkg.com/lucide-static@0.321.0/icons/loader-2.svg"
            },
            
            // Active state (call in progress)
            active: {
                color: "#e74c3c", // Red for active call
                type: "round",
                title: "End Interview",
                subtitle: "Click to stop",
                icon: "https://unpkg.com/lucide-static@0.321.0/icons/phone-off.svg"
            }
        };

        function showStatus(message, duration = 3000) {
            const statusEl = document.getElementById('statusMessage');
            if (statusEl) {
                statusEl.textContent = message;
                statusEl.style.display = 'block';
                setTimeout(() => {
                    statusEl.style.display = 'none';
                }, duration);
            }
        }

        // Load the VAPI SDK
        (function (d, t) {
            var g = document.createElement(t), s = d.getElementsByTagName(t)[0];
            g.src = "https://cdn.jsdelivr.net/gh/VapiAI/html-script-tag@latest/dist/assets/index.js";
            g.defer = true;
            g.async = true;
            s.parentNode.insertBefore(g, s);
            
            g.onload = function () {
                vapiInstance = window.vapiSDK.run({
                    apiKey: apiKey, // mandatory
                    assistant: assistant, // mandatory
                    config: buttonConfig // This is where the magic happens!
                });
                
                if (vapiInstance) {
                    showStatus('Interview widget ready!', 2000);
                    console.log('‚úÖ VAPI widget loaded with custom styling');
                    
                    // Optional: Listen to events
                    vapiInstance.on('call-start', () => {
                        showStatus('Interview started - speak clearly!');
                        console.log('Call started');
                    });
                    
                    vapiInstance.on('call-end', () => {
                        showStatus('Interview ended');
                        console.log('Call ended');
                    });
                }
            };
        })(document, "script");
    </script>
</body>
</html>
