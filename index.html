<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Interview Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .intro-section {
            text-align: left;
            color: #333;
            margin-bottom: 40px;
        }
        
        .intro-section h1 {
            color: #34495e;
            margin-bottom: 25px;
            font-size: 32px;
            text-align: center;
            font-weight: bold;
        }
        
        .intro-section p {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .tips {
            font-size: 16px;
            color: #666;
            margin-bottom: 40px;
            padding: 15px;
            background-color: #e8f4f8;
            border-radius: 8px;
            border-left: 4px solid #34495e;
        }
        
        .widget-area {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 300px;
            position: relative;
        }
        
        /* VAPI Widget Styling */
        vapi-widget {
            position: relative !important;
            width: 180px !important;
            height: 180px !important;
            border-radius: 50% !important;
            z-index: 1000 !important;
        }
        
        /* Custom pulsing overlay */
        .pulse-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background-color: #34495e;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            cursor: pointer;
            animation: pulse 2.5s infinite ease-in-out;
            z-index: 999;
            pointer-events: none;
        }
        
        /* Prominent pulsing animation */
        @keyframes pulse {
            0% {
                background-color: #34495e;
                box-shadow: 0 0 15px rgba(52, 73, 94, 0.3);
                opacity: 0.9;
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                background-color: #5dade2;
                box-shadow: 0 0 50px rgba(93, 173, 226, 0.9), 
                           0 0 70px rgba(93, 173, 226, 0.6),
                           0 0 90px rgba(93, 173, 226, 0.4);
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.05);
            }
            100% {
                background-color: #34495e;
                box-shadow: 0 0 15px rgba(52, 73, 94, 0.3);
                opacity: 0.9;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        /* Status messages */
        .status-message {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 24px;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 25px;
            font-size: 14px;
            z-index: 1002;
            display: none;
            text-align: center;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .intro-section h1 {
                font-size: 28px;
            }
            
            .intro-section p {
                font-size: 16px;
            }
            
            .pulse-overlay {
                width: 150px;
                height: 150px;
                font-size: 16px;
            }
            
            vapi-widget {
                width: 150px !important;
                height: 150px !important;
            }
        }
        
        /* Hide widget initially until it loads */
        vapi-widget {
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        
        vapi-widget.loaded {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="intro-section">
            <h1>Ready for Your AI Interview?</h1>
            <p>
                Before you begin, please find a <strong>quiet, private location</strong> with good internet connection. Make sure you're in a well-lit space where you can speak clearly without interruptions.
            </p>
            <p>
                The AI assistant will guide you through the interview process. Speak naturally and take your time to think before answering. If you need clarification on any question, don't hesitate to ask.
            </p>
            <div class="tips">
                <strong>üìù Tips for Success:</strong><br>
                ‚Ä¢ Use headphones or earbuds for better audio quality<br>
                ‚Ä¢ Close other applications to ensure stable connection<br>
                ‚Ä¢ Have your resume or relevant documents nearby if needed<br>
                ‚Ä¢ Speak clearly and at a normal pace
            </div>
        </div>
        
        <div class="widget-area">
            <vapi-widget 
                assistant-id="cca041a2-332f-49ee-912a-7a572c867667" 
                public-key="1f80cbcd-97fc-45ad-ba54-5eff014c5f4e"
                mode="voice"
                theme="dark"
                size="large"
                position="center"
                title="AI Interview Assistant"
                start-button-text="Start Interview"
                end-button-text="End Interview"
                voice-show-transcript="true"
                require-consent="true"
                consent-title="Interview Consent"
                consent-content="By starting this interview, I consent to the recording and processing of this conversation for evaluation purposes."
            ></vapi-widget>
            
            <div class="pulse-overlay" id="pulseOverlay">
                Click to Start<br>Interview
            </div>
        </div>
    </div>
    
    <div class="status-message" id="statusMessage"></div>
    
    <script src="https://unpkg.com/@vapi-ai/client-sdk-react/dist/embed/widget.umd.js" async type="text/javascript"></script>
    
    <script>
        let isWidgetReady = false;
        
        function showStatus(message, duration = 3000) {
            const statusEl = document.getElementById('statusMessage');
            statusEl.textContent = message;
            statusEl.style.display = 'block';
            setTimeout(() => {
                statusEl.style.display = 'none';
            }, duration);
        }
        
        function initializeWidget() {
            const widget = document.querySelector('vapi-widget');
            const overlay = document.getElementById('pulseOverlay');
            
            if (widget) {
                console.log('‚úÖ VAPI widget found');
                
                // Show the widget once it's ready
                setTimeout(() => {
                    widget.classList.add('loaded');
                    isWidgetReady = true;
                    showStatus('Ready to start your interview!', 2000);
                }, 1000);
                
                // Hide overlay when widget becomes active
                const observer = new MutationObserver((mutations) => {
                    mutations.forEach((mutation) => {
                        if (mutation.type === 'attributes') {
                            // Check if widget is in active state
                            if (widget.getAttribute('data-state') || widget.classList.contains('active')) {
                                overlay.style.display = 'none';
                            }
                        }
                    });
                });
                
                observer.observe(widget, {
                    attributes: true,
                    attributeFilter: ['data-state', 'class']
                });
                
                // Listen for widget events
                widget.addEventListener('click', () => {
                    console.log('üéØ Interview starting...');
                    showStatus('Starting your interview...', 2000);
                    setTimeout(() => {
                        overlay.style.display = 'none';
                    }, 1000);
                });
                
            } else {
                console.log('‚ùå VAPI widget not found');
                showStatus('Widget failed to load. Please refresh the page.', 5000);
            }
        }
        
        // Initialize when page loads
        window.addEventListener('load', () => {
            console.log('Page loaded, initializing widget...');
            setTimeout(initializeWidget, 2000);
        });
        
        // Fallback initialization
        setTimeout(() => {
            if (!isWidgetReady) {
                initializeWidget();
            }
        }, 5000);
    </script>
</body>
</html>
